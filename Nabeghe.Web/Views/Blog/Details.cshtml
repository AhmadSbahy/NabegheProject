@using Nabeghe.Application.Statics
@using Nabeghe.Application.Extensions
@model Nabeghe.Domain.Models.Blog.Blog
<div class="max-w-7xl space-y-14 px-4 mx-auto">
	<div class="flex md:flex-nowrap flex-wrap items-start gap-5">
		<div class="md:w-8/12 w-full">
			<div class="relative">
				<!-- article:thumbnail -->
				<div class="relative z-10">
					<img src="@PathTools.BlogImagePath@Model.BlogImage" class="max-w-full rounded-3xl" alt="...">
				</div>

				<div class="-mt-12 pt-12">
					<div class="bg-gradient-to-b from-background to-secondary rounded-b-3xl space-y-2 p-5 mx-5">
						<!-- article:title -->
						<h1 class="font-bold text-xl text-foreground">@Model.BlogTitle</h1>
					</div>
					<div class="space-y-10 py-5">
						<!-- article:description -->
						<div class="description">
							@Html.Raw(Model.BlogDescription)
						</div>
						<!-- end article:description -->
						<!-- article:comments:container -->
						<div class="space-y-5">
							<!-- article:comments:title -->
							<div class="flex items-center gap-3 mb-5">
								<div class="flex items-center gap-1">
									<div class="w-1 h-1 bg-foreground rounded-full"></div>
									<div class="w-2 h-2 bg-foreground rounded-full"></div>
								</div>
								<div class="font-black text-foreground">دیدگاه و پرسش</div>
							</div>
							<!-- end article:comments:container -->
							<!-- article:comments:form:wrapper -->
							@if (User.Identity.IsAuthenticated)
							{
								<partial name="_BlogComment" model="Model" />
							}
							else
							{
								<div class="alert alert-primary">برای ایجاد نظر باید وارد سایت شوید</div>
							}
							<!-- end article:comments:form:wrapper -->
							<!-- article:comments:wrapper -->
							<div class="space-y-3">
								@await Component.InvokeAsync("BlogComment", new { blogId = Model.Id })
							</div>
							<!-- end article:comments:wrapper -->
						</div>
						<!-- end article:comments:container -->
					</div>
				</div>
			</div>
		</div>
		<div class="md:w-4/12 w-full md:sticky md:top-24 space-y-8">
			<div class="space-y-5">
				<div class="flex items-center gap-3">
					<div class="flex items-center gap-1">
						<div class="w-1 h-1 bg-foreground rounded-full"></div>
						<div class="w-2 h-2 bg-foreground rounded-full"></div>
					</div>
					<div class="font-black text-sm text-foreground">نویسنده:</div>
				</div>
				<div class="space-y-3">
					<div class="flex items-center gap-3">
						<div class="flex-shrink-0 w-10 h-10 rounded-full overflow-hidden">
							<img src="@PathTools.GetAvatarPath@Model.User.Avatar" class="w-full h-full object-cover" alt="...">
						</div>
						<div class="flex flex-col items-start space-y-1">
							<a class="line-clamp-1 font-bold text-sm text-foreground hover:text-primary">
								@Model.User.GetUserFullName()
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>